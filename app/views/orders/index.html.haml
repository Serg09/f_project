=content_for :page_title do
  Orders

=render_navigation level: 2
%table#order-table.table.table-striped.table-hover
  %tr
    %th Order date
    %th Client
    %th Customer name
    %th Total
    %th &nbsp;
  -@orders.each do |order|
    %tr
      %td= format_date(order.order_date)
      %td= order.client.name
      %td= order.customer_name
      %td= number_to_currency(order.total)
      %td
        .btn-group
          -if order.incipient?
            =link_to edit_order_path(order), class: 'btn btn-xs btn-info edit-button', title: 'Click here to edit the order details' do
              %span.glyphicon.glyphicon-pencil{ 'aria-hidden' => true }
            =link_to order_path(order), method: :delete, class: 'btn btn-xs btn-danger delete-button', title: 'Click here to remove this order.', 'data-confirm' => 'Are you sure you want to delete this order?' do
              %span.glyphicon.glyphicon-remove{ 'aria-hidden' => true }
            =link_to submit_order_path(order), method: :patch, class: 'btn btn-xs btn-warning submit-button', title: 'Click here to finalize the order.', 'data-confirm' => 'Are you sure you want to submit this order?' do
              %span.glyphicon.glyphicon-transfer{ 'aria-hidden' => true }
          -else
            =link_to order_path(order), class: 'btn btn-xs btn-info', title: 'Click here to view the order details' do
              %span.glyphicon.glyphicon-eye-open{ 'aria-hidden' => true }
          -if order.submitted?
            =link_to export_order_path(order), method: :patch, class: 'btn btn-xs btn-warning export-button', title: 'Click here to send this order to the fulfillment provider.', 'data-confirm' => 'Are you sure you want to send this order for fulfillment?' do
              %span.glyphicon.glyphicon-export{ 'aria-hidden' => true }
=will_paginate @orders, renderer: BootstrapPagination::Rails
=link_to 'Add', new_order_path, class: 'btn btn-primary', title: 'Click here to create an order'
